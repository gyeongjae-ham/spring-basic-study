### Spring-basic-practice

- 자바의 정석 스터디 병행하면서 다시 시작
- nest.js 프레임워크 구성이 spring 방식과 거의 유사해서 공부하면 실무에 도움될 듯
- spring 강의 전체 다 훑어보고 nest.js 빌드와 속도차이가 없다면 java 고려해보기

### Singleton

- 싱글톤 패턴이든, 스프링 같은 싱글톤 컨테이너를 사용하든, 객체 인스턴스를 하나만 생성해서 공유하는 싱글톤 방식은 여러 클라이언트가 하나의 같은 객체 인스턴스를 공유하기 때문에 싱글톤 객체는 상태를 유지(
  stateful)하게 설계하면 안된다.
- **무상태(stateless)로 설계해야 한다!**
- 특정 클라이언트에 의존적인 필드가 있으면 안된다.
- **특정 클라이언트가 값을 변경할 수 있는 필드가 있으면 안된다!**
- 가급적 읽기만 가능해야 한다.
- 필드 대신에 자바에서 공유되지 않는, 지역변수, 파라미터, ThreadLocal 등을 사용해야 한다.
- **스프링 빈의 필드에 공유 값을 설정하면 정말 큰 장애가 발생할 수 있다!!!**

### 참고

- 생성자는 필수 정보(파라미터)를 받고, 메모리를 할당해서 객체를 생성하는 책임을 가진다
- 반면에 초기화는 이렇게 생성된 값들을 활용해서 외부 커넥션을 연결하는 등 무거운 동작을 수행한다
- 따라서 생성자 안에서 무거운 초기화 작업을 함께 하는 것 보다는 객체를 생성하는 부분과 초기화 하는 부분을 명확하게 나누는 것이 유지보수 관점에서 좋다. 물론 초기화 작업이 내부 값들만 약간 변경하는 정도로
  단순한 경우에는 생성자에서 한번에 다 처리하는 게 더 나을 때도 있다

### Spring이 Bean 생명주기 콜백 지원하는 방법 3가지

1. 인터페이스(InitializingBean, DisposableBean)
2. 설정 정보에 초기화 메서드, 종료 메서드 지정
3. @PostConstruct, @PreDestroy 에노테이션 지원